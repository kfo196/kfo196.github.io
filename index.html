<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>مشروع التخرج — كليات بريدة</title>
  <style>
    :root{
      --accent:#9b5de5; --dark:#0d0d0d; --muted:#c4b5fd; --card:#1a1a1a;
      font-family: Tahoma, Arial, sans-serif;
    }
    body{margin:0;background:linear-gradient(135deg,#0d0d0d,#1a0033);color:#fff;line-height:1.6;overflow-x:hidden;}
    .container{max-width:1000px;margin:0 auto;padding:20px}
    header{background:#1a1a1a;box-shadow:0 2px 12px rgba(155,93,229,0.6);position:sticky;top:0;z-index:10;}
    .nav{display:flex;justify-content:space-between;align-items:center;padding:10px 0}
    .logo{background:var(--accent);color:#fff;padding:10px 16px;border-radius:8px;font-weight:700;box-shadow:0 0 12px var(--accent)}
    nav ul{display:flex;list-style:none;gap:15px;padding:0;margin:0}
    nav a{text-decoration:none;color:#fff;font-weight:bold;transition:color .3s;cursor:pointer}
    nav a:hover{color:var(--accent)}
    h1,h2,h3{margin:0 0 10px;color:var(--accent)}
    .card{background:var(--card);padding:18px;border-radius:12px;box-shadow:0 0 20px rgba(155,93,229,0.3);margin-bottom:20px}
    button{padding:10px 16px;border:0;border-radius:8px;background:var(--accent);color:#fff;font-weight:bold;cursor:pointer;transition:transform .3s,box-shadow .3s}
    button:hover{transform:scale(1.05);box-shadow:0 0 15px var(--accent)}
    img{max-width:100%;border-radius:8px;margin:10px 0;box-shadow:0 0 15px rgba(155,93,229,0.4)}
    input, textarea {width:100%;padding:10px;margin:6px 0;border-radius:8px;border:1px solid #444;background:#111;color:#fff}
    #ipResult{margin-top:10px;font-weight:bold;color:var(--muted)}

    /* Popup */
    .popup-overlay{
      display:none;position:fixed;top:0;left:0;width:100%;height:100%;
      background:rgba(0,0,0,0.7);z-index:1000;align-items:center;justify-content:center;
    }
    .popup{
      background:#111;padding:20px;border-radius:12px;max-width:400px;width:95%;color:#fff;
      box-shadow:0 0 20px rgba(155,93,229,0.8);text-align:center;position:relative;
    }
    .popup h2{color:var(--accent);margin-bottom:10px}
    .close-btn{
      position:absolute;top:10px;left:10px;background:#333;border:0;color:#fff;
      border-radius:50%;width:28px;height:28px;cursor:pointer;font-weight:bold;
    }
    .board{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin:15px 0}
    .cell{
      width:100px;height:100px;background:#1a1a1a;border-radius:8px;font-size:32px;
      display:flex;align-items:center;justify-content:center;cursor:pointer;
    }
    .status{margin-top:10px;color:var(--muted)}
  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <div class="logo">🔒 مشروع التخرج</div>
      <nav>
        <ul>
          <li><a href="#about">عن المشروع</a></li>
          <li><a href="#ip">عن الـIP</a></li>
          <li><a href="#cyber">الأمن السيبراني</a></li>
          <li><a href="#gallery">معرض الصور</a></li>
          <li><a href="#contact">تواصل</a></li>
          <li><a id="openGame">🎮 إلعب XO</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="container">
    <!-- أقسامك الأصلية -->
    <section id="about" class="card">
      <h1>مشروع التخرج — كليات بريدة</h1>
      <p>التخصص: <strong>الأمن السيبراني</strong></p>
      <p>إعداد الطالب: <strong>حمود عبد الكريم</strong></p>
      <p>هذا الموقع عبارة عن نموذج لمشروع التخرج يشرح مفاهيم تقنية أساسية ويعرض مثال عملي لكيفية جلب عنوان IP الخاص بالمستخدم.</p>
    </section>
    <section id="ip" class="card">
      <h2>🔐 ما هو الـ IP؟</h2>
      <button onclick="getIP()">اعرض عنوان IP الخاص بي</button>
      <div id="ipResult"></div>
    </section>
    <!-- باقي الأقسام ... -->
  </main>

  <footer class="container" style="text-align:center;color:var(--muted);padding:20px 0">
    &copy; 2025 — كليات بريدة — الطالب حمود عبد الكريم — تخصص الأمن السيبراني
  </footer>

  <!-- Popup للعبة -->
  <div class="popup-overlay" id="popupOverlay">
    <div class="popup">
      <button class="close-btn" id="closePopup">✖</button>
      <h2>لعبة XO</h2>
      <div class="board" id="board">
        <div class="cell" data-i="0"></div>
        <div class="cell" data-i="1"></div>
        <div class="cell" data-i="2"></div>
        <div class="cell" data-i="3"></div>
        <div class="cell" data-i="4"></div>
        <div class="cell" data-i="5"></div>
        <div class="cell" data-i="6"></div>
        <div class="cell" data-i="7"></div>
        <div class="cell" data-i="8"></div>
      </div>
      <p class="status" id="status">دورك الآن</p>
    </div>
  </div>

  <script>
    // زر فتح/إغلاق
    const popupOverlay = document.getElementById('popupOverlay');
    document.getElementById('openGame').onclick = ()=> popupOverlay.style.display="flex";
    document.getElementById('closePopup').onclick = ()=> popupOverlay.style.display="none";

    // لعبة XO
    const cells = document.querySelectorAll('.cell');
    const statusEl = document.getElementById('status');
    let board = Array(9).fill(null);
    let player = "X", ai = "O", currentTurn = "X", gameOver=false;

    cells.forEach(cell=>{
      cell.onclick=()=>{
        const i = cell.dataset.i;
        if(gameOver || board[i]) return;
        if(currentTurn!==player) return;
        makeMove(i, player);
        afterMove();
      };
    });

    function makeMove(i, symbol){
      board[i]=symbol;
      cells[i].textContent=symbol;
    }

    function afterMove(){
      const winner=checkWinner(board);
      if(winner){ endGame(winner); return;}
      if(board.every(x=>x)) { endGame("draw"); return;}
      currentTurn=(currentTurn==="X")?"O":"X";
      if(currentTurn===ai){
        const best=findBestMove(board, ai);
        makeMove(best.index, ai);
        afterMove();
      } else {
        statusEl.textContent="دورك الآن";
      }
    }

    function checkWinner(b){
      const lines=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
      for(const [a,b1,c] of lines){ if(b[a]&&b[a]===b[b1]&&b[a]===b[c]) return b[a]; }
      return null;
    }

    function endGame(result){
      gameOver=true;
      statusEl.textContent=(result==="draw")?"تعادل!":(result===player?"فزت 🎉":"الـAI فاز 😅");
      // إعادة اللعبة تلقائيًا بعد ثانيتين
      setTimeout(resetGame, 2000);
    }

    function resetGame(){
      board = Array(9).fill(null);
      cells.forEach(c => c.textContent="");
      gameOver=false;
      currentTurn="X"; // اللاعب يبدأ دائمًا
      statusEl.textContent="دورك الآن";
    }

    function findBestMove(bState, aiSymbol){
      let bestVal=-Infinity, moveIndex=-1;
      for(let i=0;i<9;i++){
        if(!bState[i]){
          bState[i]=aiSymbol;
          const val=minimax(bState,0,false);
          bState[i]=null;
          if(val>bestVal){bestVal=val;moveIndex=i;}
        }
      }
      return {index:moveIndex};
    }

    function minimax(boardArr,depth,isMax){
      const winner=checkWinner(boardArr);
      if(winner===ai) return 10-depth;
      if(winner===player) return depth-10;
      if(boardArr.every(x=>x)) return 0;

      if(isMax){
        let best=-Infinity;
        for(let i=0;i<9;i++){if(!boardArr[i]){boardArr[i]=ai;best=Math.max(best,minimax(boardArr,depth+1,false));boardArr[i]=null;}}
        return best;
      } else {
        let best=Infinity;
        for(let i=0;i<9;i++){if(!boardArr[i]){boardArr[i]=player;best=Math.min(best,minimax(boardArr,depth+1,true));boardArr[i]=null;}}
        return best;
      }
    }

    // جلب IP
    async function getIP(){
      const res = await fetch('https://api.ipify.org?format=json');
      const data = await res.json();
      document.getElementById('ipResult').textContent = "عنوان IP الخاص بك: " + data.ip;
    }
  </script>
</body>
</html>
